<!DOCTYPE html>
<html>
  <head>
    <title>OFraMP</title>
    <meta charset="utf-8" />
    <script type="text/javascript" src="OFraMP.js"></script>

    <script>
      var mv = new MoleculeViewer();

      window.onload = function() {
        var OAPoC_URL = document.URL.match(/vps955\.directvps\.nl/) ? "http://vps955.directvps.nl/OAPoC/" : "http://127.0.0.1:8000/";

        mv.init("mainMolecule", {
          interactive : true,
          oapoc_url: OAPoC_URL
        });
        mv.showMolecule("CC(NC)CC1=CC=C(OCO2)C2=C1");

        var zi = document.getElementById("zoomin");
        zi.onclick = function() {
          mv.zoom(1.1);
        };
        var zo = document.getElementById("zoomout");
        zo.onclick = function() {
          mv.zoom(.9);
        };
        var ml = document.getElementById("movel");
        ml.onclick = function() {
          mv.move(-10, 0);
        };
        var mr = document.getElementById("mover");
        mr.onclick = function() {
          mv.move(10, 0);
        };
        var mu = document.getElementById("moveu");
        mu.onclick = function() {
          mv.move(0, -10);
        };
        var md = document.getElementById("moved");
        md.onclick = function() {
          mv.move(0, 10);
        };
        var cr = document.getElementById("centr");
        cr.onclick = function() {
          mv.bestFit();
        };
        var sm = document.getElementById("show");
        sm.onclick = function() {
          var data = document.getElementById("data");
          mv.showMolecule(data.value);
        };
        var dl = document.getElementById("download");
        dl.onclick = function() {
          var data = mv.canvas.toDataURL('image/png');
          this.href = data.replace(/^data:image\/[^;]/, 'data:application/octet-stream');
          var date = new Date().format("%Y%m%d%H%M%S");
          this.download = "OFraMP-" + date + ".png";
        };
      };
    </script>
  </head>

  <body>
    <fieldset style="width: 758px; margin: 0; padding: 5px 20px; border: 2px solid #333;">
      <legend>
        OFraMP - The Online tool for Fragment-based Molecule Parameterisation
      </legend>
      <button id="zoomin">
        Zoom +
      </button>
      <button id="zoomout">
        Zoom -
      </button>
      <button id="movel">
        Move &lt;
      </button>
      <button id="mover">
        Move &gt;
      </button>
      <button id="moveu">
        Move ^
      </button>
      <button id="moved">
        Move v
      </button>
      <button id="centr">
        Center
      </button>
      <input type="text" id="data" placeholder="SMILES" />
      <button id="show">
        Show
      </button>
      <a id="download" href="">Download</a>
    </fieldset>

    <canvas id="mainMolecule" width="800" height="420" style="border: 1px solid #333; border-top: 0; -webkit-user-select: none; user-select: none;">
      Your browser does not support the HTML5 canvas tag.
    </canvas>
  </body>
</html>
