<!DOCTYPE html>
<html>
  <head>
    <title>OFraMP</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="static/css/style.css" />
    <!--[if IE]><script type="text/javascript" src="static/js/lib/excanvas.js"></script><![endif]-->
    <script type="text/javascript" src="static/js/compatibility/Window.js"></script>

    <script type="text/javascript" src="static/js/lib/dat.gui.js"></script>

    <script type="text/javascript" src="static/js/Tree/Tree.js"></script>

    <script type="text/javascript" src="static/js/extensions/extensions.js"></script>
    <script type="text/javascript" src="static/js/extensions/Array.js"></script>
    <script type="text/javascript" src="static/js/extensions/CanvasRenderingContext2D.js"></script>
    <script type="text/javascript" src="static/js/extensions/Date.js"></script>
    <script type="text/javascript" src="static/js/extensions/DOM.js"></script>
    <script type="text/javascript" src="static/js/extensions/MouseEvent.js"></script>
    <script type="text/javascript" src="static/js/extensions/Number.js"></script>
    <script type="text/javascript" src="static/js/extensions/Object.js"></script>
    <script type="text/javascript" src="static/js/extensions/String.js"></script>

    <script type="text/javascript" src="static/js/Cache/Cache.js"></script>

    <script type="text/javascript" src="static/js/OFraMP/Atom.js"></script>
    <script type="text/javascript" src="static/js/OFraMP/AtomList.js"></script>
    <script type="text/javascript" src="static/js/OFraMP/Bond.js"></script>
    <script type="text/javascript" src="static/js/OFraMP/BondList.js"></script>
    <script type="text/javascript" src="static/js/OFraMP/Molecule.js"></script>
    <script type="text/javascript" src="static/js/OFraMP/MoleculeViewer.js"></script>
    <script type="text/javascript" src="static/js/OFraMP/settings.js"></script>

    <script>
      var mv;

      window.onload = function() {
        var canvas = document.getElementById("mainMolecule");
        canvas.width = document.documentElement.clientWidth;
        canvas.height = document.documentElement.clientHeight - 120;
        canvas.width = document.documentElement.clientWidth;
        canvas.height = document.documentElement.clientHeight - 120;

        var OAPoC_URL = document.URL.match(/vps955\.directvps\.nl/) ? "http://vps955.directvps.nl/OAPoC/" : "http://127.0.0.1:8000/";

        mv = new MoleculeViewer("mainMolecule", {
          interactive : true,
          oapoc: { url : OAPoC_URL }
        });
        mv.showMolecule("CC(NC)CC1=CC=C(OCO2)C2=C1");

        gui = new dat.GUI({name: 'OFraMP Settings', savable: true});
        gui.addAll(mv.settings, mv.settings, $ext.object.extrapolate(SETTINGS_OPTIONS));

        var zi = document.getElementById("zoomin");
        zi.onclick = function() {
          mv.zoom(1.1);
        };
        var zo = document.getElementById("zoomout");
        zo.onclick = function() {
          mv.zoom(.9);
        };
        var ml = document.getElementById("movel");
        ml.onclick = function() {
          mv.move(-10, 0);
        };
        var mr = document.getElementById("mover");
        mr.onclick = function() {
          mv.move(10, 0);
        };
        var mu = document.getElementById("moveu");
        mu.onclick = function() {
          mv.move(0, -10);
        };
        var md = document.getElementById("moved");
        md.onclick = function() {
          mv.move(0, 10);
        };
        var cr = document.getElementById("centr");
        cr.onclick = function() {
          mv.bestFit();
        };
        var mn = document.getElementById("minim");
        mn.onclick = function() {
          mv.minimize();
        };
        var mm = document.getElementById("maxim");
        mm.onclick = function() {
          mv.maximize();
        };
        var id = document.getElementById("ideal");
        id.onclick = function() {
          mv.idealize();
        };
        var rp = document.getElementById("reset");
        rp.onclick = function() {
          mv.resetPositions();
        };
        var op = document.getElementById("opti");
        op.onclick = function() {
          gui.toggle();
        };
        var sm = document.getElementById("show");
        sm.onclick = function() {
          var data = document.getElementById("data");
          mv.showMolecule(data.value);
        };
        var dl = document.getElementById("download");
        dl.onclick = function() {
          var data = mv.canvas.toDataURL('image/png');
          this.href = data.replace(/^data:image\/[^;]/, 'data:application/octet-stream');
          var date = $ext.date.format(new Date(), "%Y%m%d%H%M%S");
          this.download = "OFraMP-" + date + ".png";
        };

        window.onresize = function() {
          canvas.width = document.documentElement.clientWidth;
          canvas.height = document.documentElement.clientHeight - 120;
          canvas.width = document.documentElement.clientWidth;
          canvas.height = document.documentElement.clientHeight - 120;
          mv.redraw();
        };
      };
    </script>
  </head>

  <body>
    <div id="header">
      <h1>OFraMP - The Online tool for Fragment-based Molecule Parameterisation</h1>

      <input type="text" id="data" placeholder="SMILES" />
      <button id="show">
        Show
      </button>
      <span style="display:inline-block; width: 50px;">&nbsp;</span>
      <button id="opti">
        Settings
      </button>
      <span style="display:inline-block; width: 50px;">&nbsp;</span>
      <a id="download" href="">Download</a>
      <br />

      <button id="zoomin">
        Zoom +
      </button>
      <button id="zoomout">
        Zoom -
      </button>
      <span style="display:inline-block; width: 50px;">&nbsp;</span>
      <button id="movel">
        Move &lt;
      </button>
      <button id="mover">
        Move &gt;
      </button>
      <button id="moveu">
        Move ^
      </button>
      <button id="moved">
        Move v
      </button>
      <br />

      <button id="centr">
        Best fit
      </button>
      <button id="minim">
        Minimize
      </button>
      <button id="ideal">
        Idealize
      </button>
      <button id="maxim">
        Maximize
      </button>
      <span style="display:inline-block; width: 50px;">&nbsp;</span>
      <button id="reset">
        Reset positions
      </button>
    </div>
    <div id="canvasContainer">
      <canvas id="mainMolecule" width="800" height="420">
        Your browser does not support the HTML5 canvas tag.
      </canvas>
    </div>
  </body>
</html>
